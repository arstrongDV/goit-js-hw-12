{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\"\n\nconst getImagesByQuery = async(query, page) => {\n    const res = await axios.get(\"https://pixabay.com/api/\", {\n        params: {\n            key: \"54688659-274dda35ccf4409a95eb9f6bd\",\n            q: query,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true,\n            page,\n            per_page: 15\n        }\n    })\n\n    return res.data;\n};\n\nexport default getImagesByQuery;","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst showMoreBtn = document.querySelector(\".loadMoreBtn\");\n\nlet lightbox = new SimpleLightbox(\".gallery a\", {\n    captions: true,\n    captionsData: \"alt\",\n    captionDelay: 250,\n  });\n\nexport const createGallery = (images) => {\n    const markup = images.map(image => (\n        `\n            <li class=\"item-image\">\n                <a href=\"${image.largeImageURL}\">\n                    <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n                </a>\n                <ul class=\"image-info\">\n                    <li class=\"image-info-item\">\n                        <p>Likes</p>\n                        <span>${image.likes}</span>\n                    </li>\n                    <li class=\"image-info-item\">\n                        <p>Views</p>\n                        <span>${image.views}</span>\n                    </li>\n                    <li class=\"image-info-item\">\n                        <p>Comments</p>\n                        <span>${image.comments}</span>\n                    </li>\n                    <li class=\"image-info-item\">\n                        <p>Downloads</p>\n                        <span>${image.downloads}</span>\n                    </li>\n                </ul>\n            </li>\n        `\n    )).join(\"\")\n\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n    lightbox.refresh();\n}\n\nexport const clearGallery = () => {\n    gallery.innerHTML = '';\n}\n\nexport const showLoader = () => {\n    loader.classList.remove(\"hidden\");\n    loader.classList.add(\"visible\");\n\n}\n\nexport const hideLoader = () => {\n    loader.classList.add(\"hidden\");\n    loader.classList.remove(\"visible\");\n}\n\nexport const showLoadMoreButton = () => {\n    showMoreBtn.classList.remove(\"hidden\");\n    showMoreBtn.classList.add(\"visible\");\n}\n\nexport const hideLoadMoreButton = () => {\n    showMoreBtn.classList.add(\"hidden\");\n    showMoreBtn.classList.remove(\"visible\");\n}","import getImagesByQuery from './js/pixabay-api'\nimport { \n    createGallery, \n    hideLoader, \n    showLoader, \n    clearGallery,\n    showLoadMoreButton,\n    hideLoadMoreButton\n} from './js/render-functions';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector(\".form\");\nconst showMoreBtn = document.querySelector(\".loadMoreBtn\");\n\nlet currentQuery = \"\";\nlet currentPage = 1;\n\nconst getData = async(text) => {\n    clearGallery();\n    showLoader();\n\n    currentQuery = text;\n    currentPage = 1;\n\n    try{\n        const data = await getImagesByQuery(text);\n        hideLoader()\n        if (data.totalHits === 0) {\n            iziToast.show({\n                message: 'Sorry, there are no images matching your search query. Please try again!'\n            });\n            return;\n        }\n\n        createGallery(data.hits);\n\n        if(currentPage < Math.ceil(data.totalHits / 15)){\n            showLoadMoreButton();\n        }\n\n    }catch{\n        hideLoader();\n        iziToast.show({\n            message: 'Sorry, there was an error fetching images. Please try again!'\n        });\n    }\n}\n\nconst handleSubmit = (e) => {\n    \n    e.preventDefault();\n    const input = e.target.elements[\"search-text\"];\n    const text = input.value;\n    \n    if(!text){\n        return;\n    }\n\n    getData(text);\n\n    input.value = '';\n}\n\nform.addEventListener(\"submit\", handleSubmit);\n\nshowMoreBtn.addEventListener(\"click\", async(e) => {\n    currentPage += 1;\n\n    const elem = document.querySelector(\".item-image\");\n    let rect = elem.getBoundingClientRect();\n    // console.log(\"rect: \", rect);\n\n    showLoader();\n    try{\n        const data = await getImagesByQuery(currentQuery, currentPage);\n        hideLoader();\n\n        if (data.totalHits === 0) {\n            iziToast.show({\n                message: 'Sorry, there are no images matching your search query. Please try again!'\n            });\n            return;\n        }\n\n        createGallery(data.hits);\n        window.scrollBy({\n            top: rect.height*2,\n            behavior: \"smooth\",\n          });\n\n        if (currentPage >= Math.ceil(data.totalHits / 15)) {\n            hideLoadMoreButton();\n            iziToast.show({\n                message: \"We're sorry, but you've reached the end of search results.\"\n            });\n        }\n\n        // input.value = '';\n    }catch{\n        hideLoader();\n        iziToast.show({\n            message: 'Sorry, there was an error fetching images. Please try again!'\n        });\n    }\n})"],"names":["getImagesByQuery","query","page","axios","gallery","loader","showMoreBtn","lightbox","SimpleLightbox","createGallery","images","markup","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","currentQuery","currentPage","getData","text","data","iziToast","handleSubmit","e","input","rect"],"mappings":"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"}